#set page(
  paper: "jis-b1",
  margin: (
    top: 2cm,
    bottom: 2cm,
    left: 4cm,
    right: 4cm,
  ),
)
#set text(
  font: "Noto Sans CJK JP",
  size: 28pt,
)

#align(center)[
  #box(
    fill: rgb(200, 230, 255, 255),
    inset: (
      top: 2cm,
      bottom: 2cm,
    ),
    width: 100%,
  )[
    = #[
      実社会SNS情報を用いた LLM エージェントベースSNSシミュレーション
    ]
    #text(weight: "bold")[村上研究室 f21038 5J11 小山弘人]
  ]
]

#let section_box(title, width, height, content) = {
  rect(
    width: width,
    height: height,
    stroke: none,
  )[
    #place(
      center + top,
      dy: 25pt,
    )[
      #rect(
        width: 100%,
        height: 100% - 20pt,
        stroke: rgb(200, 230, 255, 255) + 4pt,
      )
    ]
    #pad(
      top: 0pt,
      left: 30pt,
      right: 30pt,
      bottom: 20pt,
    )[
      #rect(
        stroke: rgb(200, 230, 255, 255) + 4pt,
        fill: white,
        inset: 30pt,
      )[
        #text(weight: "bold", size: 36pt)[
          == #title
        ]
      ]
      #v(1cm, weak: true)
      #content
    ]
  ]
}

#section_box("背景・目的", 100%, 11%)[
  　SNS上での情報拡散メカニズムを解明するためには，実社会のSNSデータに基づくシミュレーションが有効である。しかし，既存のSNSシミュレーション研究では，ユーザー間相互作用の再現が十分でない点や，近年のSNS APIの仕様変更に伴うユーザーデータ収集の制約により，大規模かつ現実的なシミュレーションの構築が困難であるという課題がある。そこで本研究では，APIが比較的オープンなSNS，Blueskyの実データを活用したペルソナ生成手法を提案するとともに，先行研究を基盤に，より現実のSNSに近いユーザー相互作用を再現可能なシミュレーション手法の構築を目的とする．

]

#section_box("提案手法", 100%, 30%)[
  #grid(
    // 左側は残り全部(1fr)、右側は画像用に固定幅(例: 8cm)または比率(1fr)
    // 画像のサイズに合わせてここの数値を調整してください
    columns: (1fr, 29cm), 
    gutter: 1cm, // 文字と画像の間隔
    
    // --- 左側：テキスト ---
    [
      #align(left)[
        *1，Blueskyの実データを用いたペルソナ生成手法* \
        　LLMエージェントがユーザーを再現するにあたって，ユーザーの特徴を言語化した「ペルソナ」を生成する必要がある．本研究では，Blueskyユーザーをデータ元とした3段階のペルソナ生成手法を提案する．\
        - *個人ペルソナの生成*
          -   ユーザーのプロフィール，投稿，RT，引用RT，返信データや，それぞれの行動回数をLLM(gpt-oss-120b)に入力し、個人の性格や行動特性を記述したペルソナをユーザーごとに構築する．\
        - *代表ペルソナの生成*
          - 個人ペルソナをベクトル化し，Ward法を用いて階層的クラスタリングを行う．その後，各クラスタから中心に近いユーザーをサンプリングし，再度LLM(gpt-oss-120b)を用いて統合することで，クラスタごとの共通特性を持つ代表ペルソナを構築する．
        - *背景知識の生成*
          - 作成した代表ペルソナから趣味・関心のある話題を抽出し，Web検索機能を使えるLLM(GPT-5.2)を用いてユーザーの背景知識となる情報を生成する．背景知識はペルソナの補足情報としてシミュレーションに活用する．

      ]
    ],

    // --- 右側：画像スタック ---
    // gridの右カラムの中に直接 stack を置きます
    [        
      #text(size: 28pt)[*2，ユーザー間相互作用を再現したシミュレーション手法の構築* ]
      #align(center + horizon)[ // 右カラム内での配置（中央揃えなど）
        #stack(spacing: 1cm)[
          
          // 画像1
          #box(width: 80%)[ // 幅はgridのカラム幅いっぱい(100%)にする
            #image("images/MOSAIC.png", width: 100%)
            #v(5pt) // 画像とキャプションの間隔
            #text(size: 18pt)[Figure 1: 先行研究シミュレーション概要]
          ]

          // 画像2
          #box(width: 80%)[
            #image("images/my_research.png", width: 100%)
            #v(5pt)
            #text(size: 18pt)[Figure 2: 本研究シミュレーション概要]
          ]
        ]
      ]
    ]
  )
]

#grid(
  columns: (49%, 49%), // 左右均等
  gutter: 2%,          // カラム間の隙間

  // --- 左カラム：実験 ---
  [
    #section_box("実験", 100%, 39.5%)[
      *1. データ収集*
      - Blueskyからユーザーデータを29,006,344人分収集 (全ユーザーの約74％)．
      - ニュース機関の投稿から各トピック（トランプ：1月，関税：7月，高市：10月）を抽出．各月6日ごとの5期間に分割し，エンゲージメント総数に基づく各期間の上位50件を抽出した．
      - ニュース期間内のBlueskyユーザーの各トピック・期間の投稿を合計50,851件収集した．

      *2. ペルソナ生成*
      - 「日本語投稿1000件以上のユーザー」41,798人を抽出．
      - 個人ペルソナ生成後，階層的クラスタリングにより106個のクラスタを形成し，各代表ペルソナと背景知識を生成した．

      *3. SNSシミュレーション*
      - *使用ペルソナ：* 本提案手法 (106個)，先行研究 (204個)
      - *LLM モデル：* Grok 4.1 Fast，GPT-5 Nano，DeepSeek V3.2
      - *構成：* ユーザー交流：10ステップ，ニュース反応：15ステップ
      - *ニュース投稿数：*1ステップ50件投稿
      - *反応数：*
        - ユーザー交流ステップ：フォロー内外それぞれ50件に反応を行う
        - ニュースステップ(フェーズ1)：投入されたニュース50件に反応を行う
        - ニュースステップ(フェーズ2以降)：エンゲージメントの合計が上位10件のニュースからランダム10件のコメントに返信
    ]
  ],

  // --- 右カラム：評価方法 ＋ 評価結果 ＋ まとめ ---
  [
    #stack(spacing: 1cm)[ // 縦に並べるためのスタック

      // 1. 評価方法
      #section_box("評価方法", 100%, 10%)[
        シミュレーション結果に対して，事前学習済みの感情分類モデルを用いて，シミュレーション内の投稿の感情をトピックごと，フェーズごとそれぞれポジティブ・ネガティブ・ニュートラルに分類した．
      ]

      // 2. 評価結果・考察 (先ほどの一文まとめを使用)
      #section_box("評価結果", 100%, 28.3%)[ // 高さを auto に変更推奨
      感情分類に関して，実データに近しい結果は得られなかった．しかし，感情分類ではフェーズが進むにつれてポジティブな感情の割合が増加する傾向が見られた．

      #align(center)[
    // width を 100% から 70% に変更（好きな大きさに調整してください）
    #image("images/トランプ_sentiment.png", width: 70%)
    #text(size: 18pt)[Figure 3: 「トランプ」トピック時のモデル別感情分類の比較]
  ]
  // --- 2枚目 ---
  #align(center)[
    #image("images/Grok_Blueky_vs_MOSAIC_sentiment.png", width: 70%)
    #text(size: 18pt)[Figure 4: Grok 4.1 Fast における感情分類のフェーズ別分布
] // キャプション2に変更しました
  ]
]
    ]
  ]
)
#section_box("考察", 100%, 8.1%)[
　感情分類ではフェーズが進むにつれてエコーチェンバー現象に近い傾向が見られた．しかし，本来のエコーチェンバー現象は，ネガティブで過激な意見が増える傾向であるため，本シミュレーションの結果はエコーチェンバー現象の一側面を捉えているに過ぎない．これは，商用LLMに見られるセーフティ設計によってニュースに対して否定的な反応を示すエージェントが少なかったことが影響したと考えられる．

]